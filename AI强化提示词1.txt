如何与Cursor沟通来解决这个问题
你可以直接向Cursor提出以下明确的指令，让它帮你重构和强化提示词。下面的代码块内的内容，你可以直接复制给Cursor：

python
# 任务：优化AI系统提示词以解决字段映射错误问题

当前问题：DeepSeek AI在处理用户输入如“创建标题为出差费用的申请单，金额1000元，项目是北京会议”时，未能正确解析并映射到多个字段，而是将整个句子塞进一个字段（如`description`）。

请帮我分析和重写 `services/deepseek_service.py` 中的 `SYSTEM_PROMPT`，要求必须确保AI能执行以下操作：

1.  **指令清晰性：** 明确命令AI“必须从用户输入中提取关键信息，并生成一个JSON对象”。
2.  **输出格式约束：** 强制要求AI使用一个名为 `create_smart_expense` 的工具，并且该工具的 `arguments` 参数必须是一个严格的、包含特定字段的JSON对象。
3.  **字段映射指导：** 在提示词中直接给出2-3个非常具体的输入输出示例（Few-Shot Learning），教AI如何做。
4.  **防止空谈：** 强调必须调用工具，而不是空泛地回答。

请参考以下模板结构为我生成一个新的、强化版的 `SYSTEM_PROMPT`：

```python
SYSTEM_PROMPT = """
你是一个专业的易快报申请单创建助手。你的唯一任务就是分析用户输入，并精确地调用工具来创建申请单。

## 绝对规则：
1.  你必须从用户输入中提取信息，并输出严格的JSON格式来调用 `create_smart_expense` 工具。
2.  不要询问用户确认！只要信息足够，就立即执行创建。
3.  不要将整个用户输入都放入`description`字段。

## 字段映射规则和示例：
用户会用自然语言描述，你必须将其映射到以下字段：

-   `title` (字符串): 申请单的标题。
-   `requisitionMoney` (对象): 金额。用户提到“金额XXX元”或“XXX元”时，你必须生成 `{"standard": "XXX.00"}`。
-   `u_项目1` (字符串): 项目名称。
-   `description` (字符串): 申请的详细描述或备注（可选）。

## 示例学习（Few-Shot Learning）：
用户输入: “创建标题为出差费用的申请单，金额1000元，项目是北京会议”
你的思考: 需要提取标题、金额、项目。
工具调用:
```json
{
  "tool_calls": [
    {
      "name": "create_smart_expense",
      "arguments": {
        "title": "出差费用",
        "requisitionMoney": {"standard": "1000.00"},
        "u_项目1": "北京会议"
      }
    }
  ]
}
用户输入: “我要申请2000块钱，办个团队聚餐”
你的思考: 用户没有提供标题，我需要生成一个默认标题。提到了金额。
工具调用:

json
{
  "tool_calls": [
    {
      "name": "create_smart_expense",
      "arguments": {
        "title": "团队聚餐申请",
        "requisitionMoney": {"standard": "2000.00"}
      }
    }
  ]
}
最后指令：
现在，请开始分析接下来的用户输入，并严格按照上述格式调用工具。你的响应必须是JSON格式，不要有任何其他废话。
"""

text

请根据上述要求，生成一个更完善、更强大的提示词，并确保它能够解决字段映射错误的问题。
为什么这样做能解决问题？
规则明确化：旧的提示词可能只是说“提取字段”，而新的提示词用“绝对规则”部分给出了不可违背的指令。

格式具体化：明确规定了输出的唯一格式必须是包含 tool_calls 的JSON，这锁定了AI的行为模式。

教学示例（Few-Shot Learning）：这是最关键的一步。AI大模型非常擅长通过例子学习。你提供了“用户输入”和“正确输出”的配对示例，相当于手把手教它应该怎么做。这比用文字描述规则有效得多。

字段定义清晰：明确列出了每个字段期望的数据类型和含义，减少了AI的困惑。

后续步骤
让Cursor生成新的提示词：将上面的指令发送给Cursor，让它帮你写出最终的、优化的 SYSTEM_PROMPT。

替换代码：用新生成的提示词替换掉 services/deepseek_service.py 中的旧提示词。

严格测试：重新启动服务，使用完全相同的句子进行测试（“创建标题为出差费用的申请单，金额1000元，项目是北京会议”）。

检查日志：查看AI返回的原始信息，确认它是否已经是正确的JSON格式，而不是一大段自然语言。